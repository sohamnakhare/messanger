<br />
<br />
<div class="row">
	<div class="col-lg-4 col-md-6 col-md-offset-3 col-lg-offset-4">
		<div class="section">
			<div class="padding" style="padding-top:25px">
				<div data-jc="pictureupload" data-jc-path="settings.picture"
				data-width="150" data-height="150" data-url="/api/upload/photo/" class="auto center"
				data-path="" data-error-large="@(The picture is too large.)"></div>
				<div class="center mt10 b black" data-b="settings.name" data-b-html="n => n"></div>
			</div>
			<hr class="nmb nmt" />
			<div class="success hidden" data-b="settings.response" data-b-visible="n => n && n.success">
				<i class="fa fa-check-circle"></i>@(Your account has been updated successfully.)
			</div>
			<div class="padding">
				<div data-jc="textbox" data-jc-path="settings.name" data-maxlength="30" class="m" data-required="true">@(Your name)</div>
				<div data-jc="textbox" data-jc-path="settings.email" data-maxlength="120" class="m" data-required="true" data-jc-type="email">@(E-mail address)</div>
				<div data-jc="dropdown" data-jc-path="settings.citizenship"
                    data-options="@(Africa)|Africa;@(Asia)|Asia;@(Europe)|Europe;@(Oceania)|Oceania;@(South America)|South America;@(Antartica)|Antartica;@(Worldwide)|Worldwide;@(Afghanistan)|Afghanistan;@(land Islands)|land Islands;@(Albania)|Albania;@(Algeria)|Algeria;@(American Samoa)|American Samoa;@(AndorrA)|AndorrA;@(Angola)|Angola;@(Anguilla)|Anguilla;@(Antarctica)|Antarctica;@(Antigua and Barbuda)|Antigua and Barbuda;@(Argentina)|Argentina;@(Armenia)|Armenia;@(Aruba)|Aruba;@(Australia)|Australia;@(Austria)|Austria;@(Azerbaijan)|Azerbaijan;@(Bahamas)|Bahamas;@(Bahrain)|Bahrain;@(Bangladesh)|Bangladesh;@(Barbados)|Barbados;@(Belarus)|Belarus;@(Belgium)|Belgium;@(Belize)|Belize;@(Benin)|Benin;@(Bermuda)|Bermuda;@(Bhutan)|Bhutan;@(Bolivia)|Bolivia;@(Bosnia and Herzegovina)|Bosnia and Herzegovina;@(Botswana)|Botswana;@(Bouvet Island)|Bouvet Island;@(Brazil)|Brazil;@(British Indian Ocean Territory)|British Indian Ocean Territory;@(Brunei Darussalam)|Brunei Darussalam;@(Bulgaria)|Bulgaria;@(Burkina Faso)|Burkina Faso;@(Burundi)|Burundi;@(Cambodia)|Cambodia;@(Cameroon)|Cameroon;@(Canada)|Canada;@(Cape Verde)|Cape Verde;@(Cayman Islands)|Cayman Islands;@(Central African Republic)|Central African Republic;@(Chad)|Chad;@(Chile)|Chile;@(China)|China;@(Christmas Island)|Christmas Island;@(Cocos (Keeling) Islands)|Cocos (Keeling) Islands;@(Colombia)|Colombia;@(Comoros)|Comoros;@(Congo)|Congo;@(Congo, The Democratic Republic of the)|Congo, The Democratic Republic of the;@(Cook Islands)|Cook Islands;@(Costa Rica)|Costa Rica;@(Cote D'Ivoire)|Cote D'Ivoire;@(Croatia)|Croatia;@(Cuba)|Cuba;@(Cyprus)|Cyprus;@(Czech Republic)|Czech Republic;@(Denmark)|Denmark;@(Djibouti)|Djibouti;@(Dominica)|Dominica;@(Dominican Republic)|Dominican Republic;@(Ecuador)|Ecuador;@(Egypt)|Egypt;@(El Salvador)|El Salvador;@(Equatorial Guinea)|Equatorial Guinea;@(Eritrea)|Eritrea;@(Estonia)|Estonia;@(Ethiopia)|Ethiopia;@(Falkland Islands (Malvinas))|Falkland Islands (Malvinas);@(Faroe Islands)|Faroe Islands;@(Fiji)|Fiji;@(Finland)|Finland;@(France)|France;@(French Guiana)|French Guiana;@(French Polynesia)|French Polynesia;@(French Southern Territories)|French Southern Territories;@(Gabon)|Gabon;@(Gambia)|Gambia;@(Georgia)|Georgia;@(Germany)|Germany;@(Ghana)|Ghana;@(Gibraltar)|Gibraltar;@(Greece)|Greece;@(Greenland)|Greenland;@(Grenada)|Grenada;@(Guadeloupe)|Guadeloupe;@(Guam)|Guam;@(Guatemala)|Guatemala;@(Guernsey)|Guernsey;@(Guinea)|Guinea;@(Guinea-Bissau)|Guinea-Bissau;@(Guyana)|Guyana;@(Haiti)|Haiti;@(Heard Island and Mcdonald Islands)|Heard Island and Mcdonald Islands;@(Holy See (Vatican City State))|Holy See (Vatican City State);@(Honduras)|Honduras;@(Hong Kong)|Hong Kong;@(Hungary)|Hungary;@(Iceland)|Iceland;@(India)|India;@(Indonesia)|Indonesia;@(Iran, Islamic Republic Of)|Iran, Islamic Republic Of;@(Iraq)|Iraq;@(Ireland)|Ireland;@(Isle of Man)|Isle of Man;@(Israel)|Israel;@(Italy)|Italy;@(Jamaica)|Jamaica;@(Japan)|Japan;@(Jersey)|Jersey;@(Jordan)|Jordan;@(Kazakhstan)|Kazakhstan;@(Kenya)|Kenya;@(Kiribati)|Kiribati;@(Korea, Democratic People'S Republic of)|Korea, Democratic People'S Republic of;@(Korea, Republic of)|Korea, Republic of;@(Kuwait)|Kuwait;@(Kyrgyzstan)|Kyrgyzstan;@(Lao People'S Democratic Republic)|Lao People'S Democratic Republic;@(Latvia)|Latvia;@(Lebanon)|Lebanon;@(Lesotho)|Lesotho;@(Liberia)|Liberia;@(Libyan Arab Jamahiriya)|Libyan Arab Jamahiriya;@(Liechtenstein)|Liechtenstein;@(Lithuania)|Lithuania;@(Luxembourg)|Luxembourg;@(Macao)|Macao;@(Macedonia, The Former Yugoslav Republic of)|Macedonia, The Former Yugoslav Republic of;@(Madagascar)|Madagascar;@(Malawi)|Malawi;@(Malaysia)|Malaysia;@(Maldives)|Maldives;@(Mali)|Mali;@(Malta)|Malta;@(Marshall Islands)|Marshall Islands;@(Martinique)|Martinique;@(Mauritania)|Mauritania;@(Mauritius)|Mauritius;@(Mayotte)|Mayotte;@(Mexico)|Mexico;@(Micronesia, Federated States of)|Micronesia, Federated States of;@(Moldova, Republic of)|Moldova, Republic of;@(Monaco)|Monaco;@(Mongolia)|Mongolia;@(Montenegro)|Montenegro;@(Montserrat)|Montserrat;@(Morocco)|Morocco;@(Mozambique)|Mozambique;@(Myanmar)|Myanmar;@(Namibia)|Namibia;@(Nauru)|Nauru;@(Nepal)|Nepal;@(Netherlands)|Netherlands;@(Netherlands Antilles)|Netherlands Antilles;@(New Caledonia)|New Caledonia;@(New Zealand)|New Zealand;@(Nicaragua)|Nicaragua;@(Niger)|Niger;@(Nigeria)|Nigeria;@(Niue)|Niue;@(Norfolk Island)|Norfolk Island;@(Northern Mariana Islands)|Northern Mariana Islands;@(Norway)|Norway;@(Oman)|Oman;@(Pakistan)|Pakistan;@(Palau)|Palau;@(Palestinian Territory, Occupied)|Palestinian Territory, Occupied;@(Panama)|Panama;@(Papua New Guinea)|Papua New Guinea;@(Paraguay)|Paraguay;@(Peru)|Peru;@(Philippines)|Philippines;@(Pitcairn)|Pitcairn;@(Poland)|Poland;@(Portugal)|Portugal;@(Puerto Rico)|Puerto Rico;@(Qatar)|Qatar;@(Reunion)|Reunion;@(Romania)|Romania;@(Russian Federation)|Russian Federation;@(RWANDA)|RWANDA;@(Saint Helena)|Saint Helena;@(Saint Kitts and Nevis)|Saint Kitts and Nevis;@(Saint Lucia)|Saint Lucia;@(Saint Pierre and Miquelon)|Saint Pierre and Miquelon;@(Saint Vincent and the Grenadines)|Saint Vincent and the Grenadines;@(Samoa)|Samoa;@(San Marino)|San Marino;@(Sao Tome and Principe)|Sao Tome and Principe;@(Saudi Arabia)|Saudi Arabia;@(Senegal)|Senegal;@(Serbia)|Serbia;@(Seychelles)|Seychelles;@(Sierra Leone)|Sierra Leone;@(Singapore)|Singapore;@(Slovakia)|Slovakia;@(Slovenia)|Slovenia;@(Solomon Islands)|Solomon Islands;@(Somalia)|Somalia;@(South Africa)|South Africa;@(South Georgia and the South Sandwich Islands)|South Georgia and the South Sandwich Islands;@(Spain)|Spain;@(Sri Lanka)|Sri Lanka;@(Sudan)|Sudan;@(Suriname)|Suriname;@(Svalbard and Jan Mayen)|Svalbard and Jan Mayen;@(Swaziland)|Swaziland;@(Sweden)|Sweden;@(Switzerland)|Switzerland;@(Syrian Arab Republic)|Syrian Arab Republic;@(Taiwan, Province of China)|Taiwan, Province of China;@(Tajikistan)|Tajikistan;@(Tanzania, United Republic of)|Tanzania, United Republic of;@(Thailand)|Thailand;@(Timor-Leste)|Timor-Leste;@(Togo)|Togo;@(Tokelau)|Tokelau;@(Tonga)|Tonga;@(Trinidad and Tobago)|Trinidad and Tobago;@(Tunisia)|Tunisia;@(Turkey)|Turkey;@(Turkmenistan)|Turkmenistan;@(Turks and Caicos Islands)|Turks and Caicos Islands;@(Tuvalu)|Tuvalu;@(Uganda)|Uganda;@(Ukraine)|Ukraine;@(United Arab Emirates)|United Arab Emirates;@(United Kingdom)|United Kingdom;@(United States)|United States;@(United States Minor Outlying Islands)|United States Minor Outlying Islands;@(Uruguay)|Uruguay;@(Uzbekistan)|Uzbekistan;@(Vanuatu)|Vanuatu;@(Venezuela)|Venezuela;@(Viet Nam)|Viet Nam;@(Virgin Islands, British)|Virgin Islands, British;@(Virgin Islands, U.S.)|Virgin Islands, U.S.;@(Wallis and Futuna)|Wallis and Futuna;@(Western Sahara)|Western Sahara;@(Yemen)|Yemen;@(Zambia)|Zambia;@(Zimbabwe)|Zimbabwe"
                    data-maxlength="120" class="m">@(Citizenship)</div>
				<div data-jc="textbox" data-jc-path="settings.currentLocation" data-maxlength="120" class="m">@(Current Location)</div>
				<div data-jc="dropdown" data-jc-path="settings.currentJob"
					data-options="@(Working traditional 9-5)|Working traditional 9-5;@(Digital nomad)|Digital nomad;@(Doing a remote job)|Doing a remote job;@(Remote Entrepreneur)|Remote Entrepreneur;@(Co-founder)|Co-founder;@(Running online business)|Running online business;@(Other)|Other"
					class="m">@(I'm currently)</div>
				<div data-jc="dropdown" data-jc-path="settings.lookingFor"
					data-options="@(Freelance Project)|Freelance Project;@(Remote job)|Remote job;@(Nomad dating)|Nomad dating;@(Investing)|Investing;@(co-founder)|co-founder;@(co-rent)|co-rent;@(apartment)| apartment;@(to startup)|to startup;@(start online business)|start online business;@(start drop-shipping)|start drop-shipping;@(Language teacher job)|Language teacher job;@(Other)|Other"
					class="m">@(I'm looking for)</div>
				<div data-jc="dropdown" data-jc-path="settings.education"
					data-options="@(Masters)|Masters;@(Bachelors)|Bachelors;@(Some diploma)|Some diploma;@(Highschool)|Highschool;@(Other)|Other"
					class="m">@(Education)</div>
					<div data-jc="textbox" data-jc-path="settings.age" data-maxlength="120" class="m">@(Age)</div>
				<br />
				<div data-jc="error" data-jc-path="settings.response"></div>
				<div data-jc="validation" data-jc-path="settings">
					<button class="button exec" data-exec="settings_save" disabled="disabled">@(SUBMIT)</button>
				</div>
			</div>
		</div>
	</div>
</div>
<br />
<br />

<script>

	var settings = {};

	function settings_reload() {
		SET('current.title', '@(Settings)');
		SET('current.description', '@(Change your preferences)');
		$('#messagebox').addClass('hidden');
		EMIT('resize');
		var data = CLONE(user);
		if (!data.theme)
			data.theme = 'dark';
		SET('settings', data, true);
		SET('common.stats', null);
		SETTER('loading', 'hide', 1000);
	}

	WATCH('settings.theme', function(path, value, type) {
		type === 2 && settings_theme(value);
	});

	function settings_theme(value) {
		var body = $(document.body);
		body.attr('class').split(' ').forEach(function(item) {
			if (item.substring(0, 5) === 'theme')
				body.removeClass(item);
		});
		body.addClass('theme-' + value);
	}

	function settings_save() {
		if (BLOCKED('settings', 2000) || !MAIN.valid('settings.*'))
			return;
		RESET('settings.*');
		AJAX('POST /api/account/', settings, 'settings.response');
		user.name = settings.name;
		user.email = settings.email;
		user.picture !== settings.picture && $('.user-name').find('img').attr('src', '/photos/{0}.jpg'.format(settings.picture));
		user.picture = settings.picture;
		user.status = settings.status;
		user.theme = settings.theme;
		user.citizenship = settings.citizenship;
		user.currentJob = settings.currentJobs;
		user.currentLocation = settings.currentLocation;
		user.lookingFor = settings.lookingFor;
		user.education = settings.education;
		user.age = settings.age;
		var tmp = current.users.findItem('id', user.id);
		if (tmp) {
			tmp.status = user.status;
			tmp.name = user.name;
			tmp.email = user.email;
			tmp.picture = user.picture;
			tmp.theme = user.theme;
		}
		settings_theme(user.theme);
	}

</script>